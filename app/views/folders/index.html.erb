<% if @user == current_user %>
  <%= render './partials/user_dashboard' %>
  <%= render './modals/new_folder_modal' %>
<% else %>
  <%= render './partials/other_user_dashboard' %>
  <%= render './modals/new_folder_modal' %>
<% end %>



<div class='flex-center'>

  <% if @user == current_user %>
    <div class="notes-container">

      <% if @folders.count > 0 %>
        <div class='note-container'>
          <button type='button' class='div15' data-toggle='modal' data-target='#newFolderModal' data-whatever='@mdo'>
            <%= image_tag 'add.png', class: 'add-note-btn' %>
            <div class='note-container-text-center'>
              <p class="mobile-font note-btn-font">
                New Folder
              </p>
            </div>
          </button>
        </div>
        <% @folders.each do |folder| %>
          <%= link_to(folder_path(folder), {:class => 'folder-container'}, remote: true) do %>
            <% folder.notes.where(archived: false).each_with_index do |note, i| %>
              <% if i < 4 %>
                <div class='board-test-image'>
                  <% if note.image.url.length > 0 %>
                    <%= image_tag note.image.url(:board_thumb),alt: "image", class: 'image-size' %>
                  <% else %>
                    <%= image_tag 'empty.png',alt: "image", class: 'image-size' %>
                  <% end %>
                </div>
              <% end %>
            <% end %>
            <% if folder.notes.where(archived: false).length == 0 %>
              <div class='board-test-image'>
                <%= image_tag 'empty.png',alt: "image", class: 'image-size' %>
              </div>
              <div class='board-test-image'>
                <%= image_tag 'empty.png',alt: "image", class: 'image-size' %>
              </div>
              <div class='board-test-image'>
                <%= image_tag 'empty.png',alt: "image", class: 'image-size' %>
              </div>
              <div class='board-test-image'>
                <%= image_tag 'empty.png',alt: "image", class: 'image-size' %>
              </div>
            <% elsif folder.notes.where(archived: false).length == 1 %>
              <div class='board-test-image'>
                <%= image_tag 'empty.png',alt: "image", class: 'image-size' %>
              </div>
              <div class='board-test-image'>
                <%= image_tag 'empty.png',alt: "image", class: 'image-size' %>
              </div>
              <div class='board-test-image'>
                <%= image_tag 'empty.png',alt: "image", class: 'image-size' %>
              </div>
            <% elsif folder.notes.where(archived: false).length == 2 %>
              <div class='board-test-image'>
                <%= image_tag 'empty.png',alt: "image", class: 'image-size' %>
              </div>
              <div class='board-test-image'>
                <%= image_tag 'empty.png',alt: "image", class: 'image-size' %>
              </div>
            <% elsif folder.notes.where(archived: false).length == 3 %>
              <div class='board-test-image'>
                <%= image_tag 'empty.png',alt: "image", class: 'image-size' %>
              </div>
            <% end %>
            <div class='note-container-text'>
              <p class="mobile-font note-btn-font">
                <%= truncate(folder.name, length: 40) %>
              </p>
            </div>
          <% end %>
        <% end %>
      <% else %>
        <!-- <div class="no-content-message" id="folder-no-data">
          <h1 class="blue-heading">Curate your Picnotes.</h1>
          <p>Folders are a way to organize your Picnotes in different categories.</p>
          <p>
            <button type='button' class='div14' data-toggle='modal' data-target='#newFolderModal' data-whatever='@mdo'> <span class="circular-new">+</span> Get Started</button>
          </p>
        </div> -->

        <div>
          <div class="no-content-message" id="folder-no-data"></div>
          <div class="desc-content">
            <h1 class="black-heading">Curate your Picnotes</h1>
            <p class="italic-text">Folders are a way to organize your Picnotes in different categories.</p>
            <p class="mp-0">
              <button type='button' class='div14' data-toggle='modal' data-target='#newFolderModal' data-whatever='@mdo'> <span class="circular-new">+</span> Get Started</button>
            </p>
          </div>
        </div>
      <% end %>
    </div>
  <% else %>


    <div class="notes-container">
      <% if @folders.count > 0 %>
        <% @folders.each do |folder| %>
          <%= link_to(folder_path(folder,user_id: @user), {:class => 'folder-container'}, remote: true) do %>
            <% folder.notes.where(archived: false).each_with_index do |note, i| %>
              <% if i < 4 %>
                <div class='board-test-image'>
                  <% if note.image.url.length > 0 %>
                    <%= image_tag note.image.url(:board_thumb),alt: "image", class: 'image-size' %>
                  <% else %>
                    <%= image_tag 'empty.png',alt: "image", class: 'image-size' %>
                  <% end %>
                </div>
              <% end %>
            <% end %>
            <% if folder.notes.where(archived: false).length == 0 %>
              <div class='board-test-image'>
                <%= image_tag 'empty.png',alt: "image", class: 'image-size' %>
              </div>
              <div class='board-test-image'>
                <%= image_tag 'empty.png',alt: "image", class: 'image-size' %>
              </div>
              <div class='board-test-image'>
                <%= image_tag 'empty.png',alt: "image", class: 'image-size' %>
              </div>
              <div class='board-test-image'>
                <%= image_tag 'empty.png',alt: "image", class: 'image-size' %>
              </div>
            <% elsif folder.notes.where(archived: false).length == 1 %>
              <div class='board-test-image'>
                <%= image_tag 'empty.png',alt: "image", class: 'image-size' %>
              </div>
              <div class='board-test-image'>
                <%= image_tag 'empty.png',alt: "image", class: 'image-size' %>
              </div>
              <div class='board-test-image'>
                <%= image_tag 'empty.png',alt: "image", class: 'image-size' %>
              </div>
            <% elsif folder.notes.where(archived: false).length == 2 %>
              <div class='board-test-image'>
                <%= image_tag 'empty.png',alt: "image", class: 'image-size' %>
              </div>
              <div class='board-test-image'>
                <%= image_tag 'empty.png',alt: "image", class: 'image-size' %>
              </div>
            <% elsif folder.notes.where(archived: false).length == 3 %>
              <div class='board-test-image'>
                <%= image_tag 'empty.png',alt: "image", class: 'image-size' %>
              </div>
            <% end %>
            <div class='note-container-text'>
              <p class="mobile-font note-btn-font">
                <%= truncate(folder.name, length: 40) %>
              </p>
            </div>
          <% end %>
        <% end %>
      <% end %>

    </div>
  <% end %>
</div>
