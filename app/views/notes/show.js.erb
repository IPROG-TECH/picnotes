if (document.getElementById('picnote-modal')) {
    document.getElementById('picnote-modal').remove();
}

document.getElementById('profileDetails').insertAdjacentHTML("beforeend", "<%= j render 'note_modal', note: @note %>");
document.getElementById('noteContent').innerHTML = "<%= j render 'note_modal', note: @note %>";

var testModal = document.getElementById('test-modal');
if (testModal) {
    var modal = new bootstrap.Modal(testModal);
    modal.show();
}

function openReference(tab){
    var i;
    var x = document.getElementsByClassName('click-reference');
    var buttons = document.getElementsByClassName('reference-tab-note');
    for (i = 0; i < x.length; i++) {
        x[i].style.display = 'none';
        x[i].style.border = 'thick #FFF solid';
    }
    for (i = 0; i < buttons.length; i++) {
        buttons[i].style.border = 'thin gray solid';
        buttons[i].style.color = 'gray';

    }
    document.getElementById(tab).style.display = 'block';
    document.querySelector(`button[onclick='openReference("${tab}")']`).style.border = 'thin #BC171D solid';
    document.querySelector(`button[onclick='openReference("${tab}")']`).style.color = '#BC171D';
}

document.getElementById('loader').classList.add('hidden');
